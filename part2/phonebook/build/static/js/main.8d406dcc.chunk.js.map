{"version":3,"sources":["components/Filter.js","components/Submit.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","props","onChange","onChangeHandler","type","Submit","onSubmitHandler","nameChangeHandler","phoneChangeHandler","nameValue","phoneValue","onSubmit","htmlFor","id","value","Persons","persons","filterValue","deletePersonHandler","personsToShow","i","length","name","toLowerCase","includes","push","map","person","number","onClick","Notification","message","notificationStyle","border","borderRadius","fontStyle","fontSize","padding","marginBottom","notificationType","borderColor","color","backgroundColor","style","baseUrl","personService","getAll","axios","get","then","response","data","create","newPerson","post","remove","delete","console","log","update","personToModify","put","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilterValue","notificationMessage","setNotificationMessage","useEffect","personsFromServer","catch","error","displayNotification","setTimeout","event","target","preventDefault","find","window","confirm","modifiedPerson","modifiedPersonList","forEach","filter","addedPerson","concat","personToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8d406dcc.chunk.js","sourcesContent":["const Filter = (props) => {\n    \n    return (\n        <div>\n            Filter by name : <input onChange={props.onChangeHandler} type=\"text\"/>\n        </div>\n    );\n};\n\nexport default Filter;","import React from 'react';\n\nconst Submit = ({onSubmitHandler, nameChangeHandler, phoneChangeHandler, nameValue, phoneValue}) => {\n    return (\n        <form onSubmit={onSubmitHandler}>\n            <h3>Add a new person :</h3>\n        <ul>\n            <li>\n                <label htmlFor=\"name\">Name :</label>\n                <input onChange={nameChangeHandler} type='text' id='name' value={nameValue}/>\n            </li>\n            <li>\n                <label htmlFor=\"phone\">Phone :</label>\n                <input onChange={phoneChangeHandler} type='phone' id='phone' value={phoneValue}/>\n            </li>\n        </ul>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    );\n};\n\nexport default Submit;","import React from 'react';\n\nconst Persons = ({persons, filterValue, deletePersonHandler}) => {\n    //------    PERSONS FILTERING PROCESS    ------//\n  const personsToShow = [] //Create an empty array to contain the objects of persons to show, we need to declare it empty at each new state render to ensure that we only show the current filtervalue\n\n  for(let i = 0 ; i < persons.length ; i++){\n\n    //LOG DEVELOPPEMENT TESTS\n    /* console.log(`persons[${i}] :>> `, persons[i].name.toLowerCase());\n    console.log('includes a >>', persons[i].name.toLowerCase().includes('a')); */\n\n    if (persons[i].name.toLowerCase().includes(filterValue.toLowerCase())){ //Compares the values of lower case name property of deach person in persons, with the actual filter value (lower case as well)\n      personsToShow.push(persons[i])//If there is a match, we push the person to the persons to show array\n      //console.log('Render the person :', persons[i].name);\n    }\n  }\n  //const personsToShow = personsLowerCase.filter(person => person.name.includes(filterValue.toLowerCase()))\n  //console.log('Persons to show -> ', personsToShow)\n\n  //ISSUE : This type of filtering generates a new iteration of the array at each global state change (even when the filter hasn't changed for example) which is useless and can require many coputational resources.\n    return (\n        <table>\n          <tbody>\n            {personsToShow.map(person => \n            <tr key={person.id}>\n                <td>{person.name}</td>\n                <td>{person.number}</td>\n                <td><button onClick={() => deletePersonHandler(person.id)}>delete</button></td>\n            </tr>\n            )}\n          </tbody>\n      </table>\n    );\n};\n\nexport default Persons;","import React from 'react';\n\n\nconst Notification = ({message}) => {\n    if (message === null){\n        return null\n    }\n    var notificationStyle = {\n        border: \"2px solid\",\n        borderRadius: \"5px\",\n        fontStyle: 'italic',\n        fontSize:'16px',\n        padding:'10px',\n        marginBottom:'30px',\n    }\n    var notificationType = ''\n    if(message.notificationType === 'info'){\n        notificationStyle={...notificationStyle,\n            borderColor: '#097c67',\n            color:'#097c67',\n            backgroundColor:'#bbe2db',\n        }\n        notificationType = 'INFO : '\n    }\n    else if(message.notificationType === 'error'){\n        notificationStyle = {...notificationStyle,\n            borderColor: '#f40606',\n            color:'#f40606',\n            backgroundColor:'#fed2d2',\n        }\n        notificationType = 'ERROR : '\n    }\n    \n\n    return (\n        <div style={notificationStyle}>\n            {notificationType + message.message}\n        </div>\n    );\n};\n\nexport default Notification","import axios from 'axios'\n\nconst baseUrl = '/api/persons/'\n\nconst getAll = () => {\n\tconst request = axios.get(baseUrl)\n\treturn request.then((response) => response.data)\n}\n\nconst create = (newPerson) => {\n\tconst request = axios.post(baseUrl, newPerson)\n\treturn request.then((response) => newPerson)\n}\n\nconst remove = (person) => {\n\tconst request = axios.delete(`${baseUrl}${person.id}`)\n\treturn request.then(() => console.log(`${person.name} has been removed successfully !`))\n}\n\nconst update = (personToModify, newPerson) => {\n\tconst request = axios.put(`${baseUrl}${personToModify.id}`, newPerson)\n\treturn request.then((response) => response.data)\n}\n\nconst personService = {\n\tgetAll,\n\tcreate,\n\tremove,\n\tupdate,\n}\n\nexport default personService\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport Submit from './components/Submit'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n\nconst App = () => {\n\t//------    COMPONENT STATES    ------//\n\tconst [persons, setPersons] = useState([])\n\tconst [newName, setNewName] = useState('')\n\tconst [newNumber, setNewNumber] = useState('')\n\tconst [filterValue, setFilterValue] = useState('')\n\tconst [notificationMessage, setNotificationMessage] = useState(null)\n\n\tuseEffect(() => {\n\t\tconsole.log('Fetching contacts from server...')\n\t\tpersonService\n\t\t\t.getAll()\n\t\t\t.then((personsFromServer) => setPersons(personsFromServer))\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error.error.data)\n\t\t\t})\n\t}, [])\n\n\t//------    EVENT HANDLERS    ------//\n\tconst handleFilterChange = (event) => {\n\t\tconsole.log('Filter -> ', event.target.value)\n\t\tsetFilterValue(event.target.value)\n\t}\n\n\tconst handleNameChange = (event) => {\n\t\tconsole.log('Current input value : ', event.target.value)\n\t\tsetNewName(event.target.value)\n\t}\n\tconst handlePhoneChange = (event) => {\n\t\tconsole.log('Current phone value : ->', event.target.value)\n\t\tsetNewNumber(event.target.value)\n\t}\n\n\tconst displayNotification = (notificationType, message) => {\n\t\tsetNotificationMessage({ notificationType, message })\n\t\tsetTimeout(() => {\n\t\t\tsetNotificationMessage(null)\n\t\t}, 5000)\n\t}\n\t//------    ADD PERSON BUTTON HANDLER    ------//\n\n\tconst addPerson = (event) => {\n\t\tevent.preventDefault()\n\t\tconst newPerson = { name: newName, number: newNumber }\n\n\t\t//first the case if the person already exists, try to update it\n\t\tif (persons.map((person) => person.name).includes(newName)) {\n\t\t\tconsole.log(`The entered name ${newName} already exists.`)\n\t\t\tconst personToModify = persons.find((person) => person.name.toLowerCase() === newPerson.name.toLowerCase())\n\t\t\tconst confirmation = window.confirm(`${newPerson.name} is already added to the phonebook, replace the old number with a new one ?`)\n\t\t\t//ask the user for confirmation\n\t\t\tif (confirmation) {\n\t\t\t\tpersonService\n\t\t\t\t\t.update(personToModify, newPerson)\n\t\t\t\t\t.then((modifiedPerson) => {\n\t\t\t\t\t\tconst modifiedPersonList = [...persons] //Create a shallow copy of persons to further change is with the new modofied person\n\t\t\t\t\t\tmodifiedPersonList.forEach((person) => {\n\t\t\t\t\t\t\tif (person.name.toLowerCase() === modifiedPerson.name.toLowerCase()) {\n\t\t\t\t\t\t\t\tperson.number = modifiedPerson.number\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tdisplayNotification('info', `Successfully modified ${newPerson.name} with the new number ${newPerson.number}`)\n\t\t\t\t\t\tsetPersons(modifiedPersonList)\n\t\t\t\t\t\tsetNewName('')\n\t\t\t\t\t\tsetNewNumber('')\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tif(error.response.data.error === 'malformatted id'){\n\t\t\t\t\t\t\t//the case when when we try to modify data that has been deleted from the server\n\t\t\t\t\t\t\tdisplayNotification('error', \"The person doesn't exist\")\n\t\t\t\t\t\t\tsetPersons(persons.filter(person => person.name.toLowerCase() !== newPerson.name.toLowerCase()))\n\t\t\t\t\t\t\tsetNewName('')\n\t\t\t\t\t\t\tsetNewNumber('')\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tdisplayNotification('error', error.response.data.error)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(error.response.data)\n\t\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\tpersonService\n\t\t\t\t.create(newPerson)\n\t\t\t\t.then((addedPerson) => {\n\t\t\t\t\tsetPersons(persons.concat(addedPerson))\n\t\t\t\t\tdisplayNotification('info', `Successfully added ${newPerson.name} with the number ${newPerson.number}`)\n\t\t\t\t\tsetNewName('')\n\t\t\t\t\tsetNewNumber('')\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tdisplayNotification('error', error.response.data.error)\n\t\t\t\t\tconsole.log(error.response.data)\n\t\t\t\t})\n\t\t}\n\t}\n\n\t//------    REMOVE PERSON BUTTON HANDLER    ------//\n\n\tconst removePerson = (id) => {\n\t\tconst personToDelete = persons.find((person) => person.id === id)\n\t\tconst confirmation = window.confirm(`Are you sure you want to delete ${personToDelete.name} from your contacts ?`)\n\t\tif (confirmation) {\n\t\t\tpersonService.remove(personToDelete).then(() => {\n\t\t\t\tsetPersons(persons.filter((person) => person.id !== id))\n\t\t\t\tconsole.log('Deleted')\n\t\t\t\tdisplayNotification('info', `${personToDelete.name} has been removed from your contacts.`)\n\t\t\t})\n\t\t}\n\t}\n\n\t//------    RETURN FIELD OF THE COMPONENT    ------//\n\treturn (\n\t\t<div>\n\t\t\t<h1>Phonebook</h1>\n\n\t\t\t<Notification message={notificationMessage} />\n\n\t\t\t<Filter onChangeHandler={handleFilterChange} />\n\t\t\t<Submit\n\t\t\t\tonSubmitHandler={addPerson}\n\t\t\t\tphoneChangeHandler={handlePhoneChange}\n\t\t\t\tnameChangeHandler={handleNameChange}\n\t\t\t\tnameValue={newName}\n\t\t\t\tphoneValue={newNumber}\n\t\t\t/>\n\t\t\t<h2>Persons</h2>\n\t\t\t<Persons persons={persons} filterValue={filterValue} deletePersonHandler={removePerson} />\n\t\t</div>\n\t)\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}